mixin print_err_code(code, err)
  if locals.settings.env === 'development'
    h1= code + ' ' + err
  else
    h1= err

mixin print_err_message( msg )
  div(class='float-left')
    img(class='padding-right-offset16', src="/images/frown_64.png", alt="Frown Face" )
  p(class='padding-bottom-offset25')= msg

extends layout

block title

  //- Defined err status code
  if error.status
    title= message
  else
    //- Undefined err status code
    title= 'Application Error'

block fonts

  if locals.settings.remote
    link(href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono', rel='stylesheet', type='text/css')

block head

  link(rel='stylesheet', href='/stylesheets/error.css')

block content

  case error.status

    when 404
      //- Handle 404 err status code by trying to provide some assistance

      +print_err_code(error.status, message)
      +print_err_message("Sorry, but the page you were trying to view does not exist.")

      p It looks like this was the result of either:
      ul
        li a mistyped address
        li an out-of-date link
      script.
        // Google 404 Widget helper
        // https://support.google.com/webmasters/answer/136085
        var GOOG_FIXURL_LANG = 'en';
        var GOOG_FIXURL_SITE = (navigator.language || '').slice(0,2),GOOG_FIXURL_SITE = location.host;

      if locals.settings.remote
        script(src='http://linkhelp.clients.google.com/tbproxy/lh/wm/fixurl.js')

      //- Handle undefined err status code
    default

      +print_err_code(500, 'Application Error')
      +print_err_message("Sorry, but the page has erred on us.")

  if locals.settings.env === 'development' || locals.settings.env === 'testing'
    hr
    pre(class='code-box') #{error.stack}
