//- HTML5 doctype
doctype html
html
  head

    //- Set default page title in case we forget to
    block title
      title= locals.settings.site_company

    // Meta
    meta(http-equiv='Content-Type', content='text/html; charset=UTF-8')
    meta(name='description', content= locals.settings.site_company)

    //- TODO: Add additional keywords
    meta(name='keywords', content= locals.settings.site_company+', law practice, law')

    meta(name='viewport', content='width=device-width')

    if locals.settings.remote
      link(href='/stylesheets/google_cse.css', rel='stylesheet', type='text/css', media='screen')

    // CSS
    link(href='/stylesheets/common.css', rel='stylesheet', type='text/css', media='screen')
    link(href='/stylesheets/style.css', rel='stylesheet', type='text/css', media='screen')

    // Use mobile styling for both device and small desktop windows
    link(href='/stylesheets/mobile.css', rel='stylesheet', type='text/css', media='only screen and (max-width: 480px), only screen and (max-device-width: 480px)')

    // Google Web Fonts
    // http://www.google.com/fonts/
    if locals.settings.remote
      link(href='http://fonts.googleapis.com/css?family=Open+Sans:italic,400,600,800', rel='stylesheet', type='text/css')
      link(href='http://fonts.googleapis.com/css?family=Lora:italic,400,600,800', rel='stylesheet', type='text/css')

    // JavaScript
    if locals.settings.env === 'development'
      script(src='/javascripts/modernizr_v2.8.3.js')
    else
      script(src='/javascripts/modernizr_v2.8.3.min.js')

    script(src='/javascripts/helpers.js')

    if locals.settings.remote
      script(src='/javascripts/google_search.js')

    if locals.settings.env === 'development'
      script.
        document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')

    //- Additional head-level block (specific per page)
    block head

  body(id='page')
      header
        div(class='header')
          h1
            a(class='site-header-red site-header-link', href='/index')= locals.settings.site_company

            //- FIXME:
            //- img( align='', src='/images/logo_small.png', alt='')

          nav
            div(class='nav')

              - each link in locals.settings.nav_links
                //- NOTE (desktop): This breaks the highlighting of the practice
                //- page when viewing children:
                //- if link.href === locals.loc.href

                //- NOTE: Styled for both mobile and desktop
                if link.href === locals.loc.pathname
                  a(class='nav-link-parent nav-link-parent-active', href=link.href) #{link.title}
                else
                  a(class='nav-link-parent', href=link.href) #{link.title}

                // Breadcrumbs (child of parent page)
                //
                // NOTE: Mobile-only display
                - for( var i = 0; i != locals.breadcrumbs.length; ++i )
                  if link.href === locals.breadcrumbs[i].home
                    a(class='nav-link-child nav-link-child-active', href= locals.breadcrumbs[i].href )= locals.breadcrumbs[i].title

              form(action='/search_results', method='get')
                //- input(id='google_cse', class='search_input', type='search', name='q', spellcheck='false', autocomplete='off', accesskey='s', onfocus='', onblur='' )
                //- button(id='search_button', type='submit')
                //- FIXME:
                input(class='search_input', type='search', name='q', spellcheck='false', autocomplete='off', accesskey='s', onfocus='', onblur='' )
                button(class='search_button', type='submit')

            //- Additional header-level elements (specific per page)
            block header

      div(id='content_container')

        //- Page content (specific per page)
        block content

      footer
        div(id='footer')
          div(class='margin-top-offset20 margin-bottom-offset25')
            strong DISCLAIMER:
            span(class='disclaimer')  THIS SITE IS FOR INFORMATIONAL PURPOSES ONLY; ITS CONTENTS DO NOT CONSTITUTE LEGAL ADVICE OR AN ATTORNEY-CLIENT RELATIONSHIP BETWEEN #{locals.settings.site_company} OR ITS ATTORNEYS AND ANY RECEIVER. THE INFORMATION PROVIDED ON THESE PAGES IS GENERAL ONLY, AND YOU SHOULD NOT ACT UPON THIS INFORMATION WITHOUT CONSULTING WITH AN ATTORNEY. IF YOU SEND ANY CONFIDENTIAL INFORMATION TO US AND YOU ARE NOT A CLIENT OF OUR LAW FIRM, THE INFORMATION SHALL LOSE ITS CONFIDENTIAL STATUS. FURTHERMORE, IF THE UNSOLICITED INFORMATION YOU SEND TO OUR LAW FIRM IS BENEFICIAL TO OUR CLIENTS AND ADVERSE TO YOU, THE INFORMATION YOU PROVIDE MAY BE USED EVEN IF IT IS CONTRARY TO YOUR INTERESTS.

          p( class='copyright' ) &copy; 2014 #{locals.settings.site_company} | &#32;
            a( href= locals.settings.site_links['privacy'].href )= locals.settings.site_links['privacy'].title

          div(class='align_right')
            span(class='align_right copyright') Site design &copy; 2014 &#32;
              a( href= locals.settings.site_developer['website'] )= locals.settings.site_developer['name']

          //- Additional footer-level elements (specific per page)
          block footer
